import sys


from ..utils import get_absolute_file_paths
COLLECTION_NAME = "subjects"
DB_URI = "/hpc2hdd/home/fye374/ZWZ_Other/quizmanus/src/RAG/vector_store/subjects.db" 
TEMP_DB_URI = "/hpc2hdd/home/fye374/LJJ/quizmanus/src/RAG/vector_store/user.db"  # 内存数据库

# from ..RAG.vector_store_utils import get_collection
# col = get_collection(DB_URI,COLLECTION_NAME)
# iterator = col.query_iterator(
#     batch_size=10,
#     expr=None,
#     output_fields=["subject"]
# )

# value_set = set()

# while True:
#     result = iterator.next()
#     if not result:
#         iterator.close()
#         break
    
#     for item in result:
#         value_set.add(item["subject"])
# col.release()
# SUBJECTS = list(value_set)


SUBJECTS = {
    "高中生物": {
        "desc_for_llm": '''
​​人教版高中生物教材​​以“细胞—遗传—稳态—生态—技术”为主线，必修一解析细胞结构与功能（物质运输、能量代谢）、生命历程（增殖与凋亡）；必修二探讨遗传规律（孟德尔定律、基因表达）与进化机制（自然选择、基因频率）；选修模块深入生命系统稳态（神经-体液-免疫调节、植物激素调控）、生态系统运行（群落演替、能量流动），并聚焦现代生物技术（基因工程、克隆、发酵工程）及其伦理争议，通过“克隆猴”“抗虫棉”等案例贯通理论与实践，培养科学探究能力与社会责任意识。
'''
    },
    "高中地理": {
        "desc_for_llm": '''
​人教版高中地理教材​​构建了“自然—人文—区域—安全”的完整体系：必修一聚焦地球系统（宇宙环境、大气圈、水圈、地貌演化）及自然灾害防治；必修二解析人类活动（人口、城乡、产业、交通）与人地协调；选修模块深化自然地理规律（地球运动、气候成因）、区域发展路径（生态治理、产业转移）及国家安全战略（能源安全、生态保护），通过“喀斯特经济”“藏水入疆”等现实议题贯穿实践分析，培养综合思维与可持续发展观。
'''
    },
    "高中历史": {
        "desc_for_llm": '''
人教版高中历史教材以“中国—世界”双线交织，必修模块纵向贯通中国通史（从早期文明到改革开放）与世界文明进程（古代帝国至全球化），突出“统一多民族国家演进”与“文明互动转型”主题；选修模块横向拓展政治制度（中西治理对比）、经济生活（技术革新与全球化）、文化交融（丝绸之路、殖民扩张影响），通过“科举制”“工业革命”“非遗保护”等典型案例，贯通制度变迁、社会转型与文化碰撞，培养时空观念、史料实证及多元文明共存的全球视野。
'''
    },
    "高中政治": {
        "desc_for_llm": '''
人教版高中政治教材构建“理论—制度—实践”三位一体体系：必修模块立足中国特色，阐述社会主义发展历程（从空想到新时代）、经济制度（所有制与市场经济）、政治体系（党的领导、依法治国）及哲学文化根基（唯物史观、文化自信）；选修模块延伸至国际政治（多极化、人类命运共同体）、法律实务（民法、劳动权益）与科学思维（逻辑推理、创新方法），通过“一带一路”“全过程人民民主”等案例贯通理论与现实，强化政治认同、法治意识与思辨能力，培养“知行合一”的公民素养。'''
    }
}




DETIALED_SUBJECTS = {
    "高中生物": {
        "desc_for_llm": '''---**人教版高中生物教材内容总览**

**必修一：分子与细胞基础**  
以细胞为核心，揭示生命系统的层次性。从细胞学说、显微镜观察到细胞分子组成（蛋白质、核酸、糖类、脂质），构建对生命物质基础的理解；聚焦细胞结构（细胞膜、细胞器、细胞核）与功能（物质运输、能量代谢），深入解析酶的作用、细胞呼吸与光合作用的能量转换机制；最后探讨细胞生命历程（增殖、分化、衰老、凋亡），建立“结构与功能相适应”的生命观念，并通过“克隆猴”“癌症治疗”等科技进展链接现代生物学应用。

**必修二：遗传与进化核心**  
从孟德尔遗传定律出发，揭示基因在染色体上的传递规律（减数分裂、伴性遗传），阐明DNA作为遗传物质的结构（双螺旋模型）与复制机制；解析基因表达（转录、翻译）与性状关系，探讨基因突变、重组及染色体变异（三倍体西瓜、人类遗传病）对生物多样性的影响；最终以自然选择学说为核心，结合种群基因频率变化（哈迪-温伯格定律）、物种形成（地理隔离）与协同进化，构建生物进化理论体系，并通过“基因组编辑”“遗传咨询”等案例体现遗传学对社会的影响。

**选修一：稳态与调节机制**  
围绕生命系统稳态的维持，剖析人体内环境（血浆、组织液、淋巴）的动态平衡，神经调节（反射弧、动作电位、分级调节）与体液调节（激素反馈调节）的协同作用，以及免疫系统（特异性免疫、疫苗原理）的防御机制；同时探讨植物激素（生长素、乙烯）对生命活动的调控（向性运动、果实成熟），以及环境因素（光周期、温度）对植物生长发育的影响，强调“稳态与平衡”在生物适应环境中的核心意义。

**选修二：生态与可持续发展**  
从种群特征（密度、年龄结构）、数量变化（J型/S型曲线）到群落结构（垂直分层、种间关系）与演替规律，构建生态系统的层级框架；分析生态系统能量流动（金字塔）、物质循环（碳循环）及信息传递（化感作用）的协同机制，结合“生态缸设计”“黄石公园引狼”等案例理解生态稳定性原理；最终落脚于人类活动对生态的影响（生物多样性保护、全球变暖）与生态工程（沼气工程、立体农业），培养可持续发展观。

**选修三：生物技术前沿**  
聚焦现代生物技术：发酵工程（传统发酵到工业化生产）、细胞工程（植物组织培养、动物细胞核移植与克隆技术）、基因工程（重组DNA技术、PCR扩增、基因编辑CRISPR）及胚胎工程（体外受精、胚胎分割），解析技术原理与农业、医学应用（抗虫棉、单克隆抗体）；同时探讨转基因安全、克隆人伦理及生物武器管控等社会议题，引导科学伦理思考。
'''
    },
    "高中地理": {
        "desc_for_llm": '''
**人教版高中地理教材内容总览**

**必修一：自然地理基础**  
以地球系统为核心，涵盖宇宙环境、大气圈、水圈、岩石圈和生物圈的相互作用。从地球的宇宙地位、太阳影响、地质演化到圈层结构，构建对地球的宏观认知；深入解析大气组成与运动、水循环、海水性质及地貌形成过程（如喀斯特、海岸地貌），探讨植被与土壤的分布规律，并聚焦自然灾害（气象、地质）的成因与防灾技术（如遥感、GIS应用）。通过“火星基地”“城市内涝”等问题研究，强化自然地理知识的实践应用。

**必修二：人文地理核心**  
围绕人类活动与地理环境的关系展开，包括人口分布与迁移规律、城乡空间结构演变（城镇化、地域文化）、三大产业区位因素（农业、工业、服务业）及其动态变化，以及交通运输对区域发展的双向影响。最终落脚于可持续发展，分析全球环境问题（如气候变化）、中国发展战略（主体功能区、海洋权益），并通过“农民工现象”“低碳食品”等案例探讨人地协调路径。

**选修一：自然地理深化**  
拓展地球运动（自转公转的地理意义）、地表形态塑造（内力与外力作用、河流地貌发育）、大气环流（天气系统、气候成因）和水体运动规律（洋流、海气相互作用）。强调自然环境的整体性与差异性（如地域分异规律），结合“南极冰山利用”“西北地区引种草坪”等议题，培养综合分析能力。

**选修二：区域发展专题**  
以区域为单元，探讨区域特征、资源环境与发展的关系。包括区域类型与关联性（如城市辐射功能）、生态脆弱区治理（荒漠化）、资源型城市转型，以及区际联系（流域协调、资源调配、产业转移）。通过“藏水入疆”“景德镇转型”等争议性问题，引导学生辩证思考区域协调发展策略。

**选修三：资源环境与国家安全**  
聚焦资源安全（能源、耕地、海洋资源）、环境安全（污染、生态保护、气候变化）与国家安全的关系，剖析中国能源战略、粮食安全、生态文明建设路径及国际合作机制。通过“核能发展”“生态足迹”等研究，培养全球视野与责任意识，理解资源环境管理的政策工具（如生态红线、碳排放交易）。
'''
    },
    "高中历史": {
        "desc_for_llm": '''> ---
**人教版高中历史教材内容总览**

**必修上：中国通史脉络**  
以时序为主线，梳理中华文明从早期国家（夏商周）到秦汉统一多民族国家的建立与巩固，涵盖三国至隋唐的民族交融、制度创新（如科举制）、文化繁荣（唐诗、佛教传播），宋元多政权并立下的经济变革（纸币、市舶司），明清版图奠定与近代危机（鸦片战争、辛亥革命）。重点剖析晚清至民国的救亡图存运动（洋务、维新、新文化运动），中国共产党领导的新民主主义革命（五四、抗日战争、解放战争），以及新中国成立后的社会主义探索与改革开放成就，形成“统一多民族国家发展”与“现代化道路探索”双主线。

**必修下：世界文明进程**  
聚焦古代文明（两河、埃及、印度）的产生与帝国兴衰（波斯、罗马），中古时期欧亚非多元格局（西欧封建、伊斯兰扩张、美洲文明），大航海时代全球联系初步建立，工业革命与资本主义制度的确立（启蒙运动、资产阶级革命），殖民扩张与亚非拉独立运动，两次世界大战与国际秩序演变（凡尔赛体系、雅尔塔体系），冷战格局、全球化及当代多极化趋势。贯穿“文明互动”与“制度变革”主题，强调工业革命、马克思主义、民族解放运动对全球历史进程的塑造。

**选修一：政治制度与治理**  
对比中西政治制度演变，中国从分封制、郡县制到现代人民民主专政，西方从雅典民主、罗马法到近代代议制；探讨官员选拔（科举制、文官制度）、法律教化（礼法结合、西方法治）、民族政策（和亲、改土归流）与外交（朝贡体系、和平共处五项原则）；分析货币赋税（铜钱到纸币、关税演变）、基层治理（户籍、社会保障），揭示制度创新与国家治理能力的关联。

**选修二：经济与社会生活**  
以生产—贸易—生活为链，追溯食物生产（农业革命、物种交流）、工具革新（铁器到智能机械）、商业形态（丝绸之路、世界市场、跨国公司）、城市化进程（古代市镇到现代都市）、交通变革（运河、铁路、航空）及医疗发展（中医成就、公共卫生体系），展现技术进步如何重塑人类生存方式，并引发食品安全、城市化问题等现代性挑战。

**选修三：文化交融与传承**  
以中华文化为核心，解析其内涵（仁礼思想、家国同构）与世界影响（四大发明西传）；对比古代西亚、欧洲、美洲文化特色，探讨人口迁徙（印欧迁移、黑奴贸易）、商路拓展（丝绸之路、三角贸易）、战争冲突（希波战争、殖民战争）对文化交融的驱动；关注文化遗产保护（非遗、世界遗产公约），强调文化多样性与人类共同价值的平衡。
'''
    },
    "高中政治": {
        "desc_for_llm": '''**人教版高中政治教材内容总览**

**必修一：中国特色社会主义理论与实践**  
以历史脉络为主线，阐述社会主义从空想到科学（马克思主义诞生）、从理论到实践（十月革命）的发展历程，解析中国道路的选择：新民主主义革命胜利（1921-1949）、社会主义制度确立（三大改造）、改革开放（市场经济探索）到新时代中国特色社主义思想（中国梦、“五位一体”总体布局）。通过“四个选择”（历史与人民选择中国共产党、社会主义、改革开放、习近平新时代中国特色社会主义思想）论证中国道路的必然性，强化制度自信与道路自信。

**必修二：经济与社会运行机制**  
聚焦社会主义基本经济制度：所有制（公有制为主体、多种所有制共同发展）、分配制度（按劳分配与多种分配方式并存）、市场经济体制（市场决定作用与政府宏观调控结合）。剖析新发展理念（创新、协调、绿色、开放、共享）与现代化经济体系建设（实体经济、乡村振兴、区域协调）；探讨社会保障体系（养老、医疗）与共同富裕目标，强调“有效市场”与“有为政府”的协同。

**必修三：政治与法治建设**  
以党的领导为核心，阐明中国共产党领导是中国特色社会主义最本质特征，贯穿“人民民主专政—人民代表大会制度—多党合作—基层自治”的政治体系，解析全面依法治国（科学立法、严格执法、公正司法、全民守法）与法治中国建设（法治国家、政府、社会三位一体）。通过“全过程人民民主”“民族区域自治”等制度，展现中国政治制度的优越性，培养法治意识与政治认同。

**必修四：哲学与文化根基**  
构建马克思主义哲学框架：辩证唯物主义（世界物质性、运动规律、矛盾分析法）、历史唯物主义（社会存在决定意识、群众史观）；探讨认识论（实践与真理）、价值观（价值判断与人生价值实现）。文化部分强调中华优秀传统文化传承（内涵、民族精神）、文化交融（民族性与多样性）与文化自信（中国特色社会主义文化发展道路），引导学生在全球化中坚守文化主体性。

**选修一：当代国际政治与经济**  
立足全球视野，分析国家形式（国体与政体、单一制与联邦制）、世界多极化趋势（新兴国家崛起）、和平发展主题（人类命运共同体）与全球治理困境（贫富差距、恐怖主义）。聚焦中国外交政策（独立自主和平外交）、经济全球化（“一带一路”、国际产能合作）与国际组织（联合国、APEC、金砖机制），阐明中国方案对全球治理的贡献。

**选修二：法律与生活实践**  
以公民权利为主线，覆盖民法（物权、合同、婚姻继承）、劳动法（劳动合同、劳动争议解决）与诉讼程序（调解、仲裁、民事诉讼），解析人身权、知识产权保护及侵权责任；结合家庭（赡养、继承）、就业（劳动合同签订）、创业（企业合规经营）等现实场景，培养法治思维与依法维权能力，体现“法律是治国之重器，良法是善治之前提”。

**选修三：逻辑与科学思维方法**  
系统训练思维工具：形式逻辑（概念、判断、推理规则）、辩证逻辑（分析与综合、质量互变）与创新思维（发散、逆向、超前思维），通过归纳与类比推理、逻辑悖论解析等培养批判性思维，提升论证严谨性。强调科学思维在解决问题（如创新设计、复杂决策）中的应用，链接哲学方法论与现实实践。'''
    }
}
